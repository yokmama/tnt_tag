# Arena Setup（アリーナ作成）

TNT TAGのアリーナを作成する方法と設計のベストプラクティスです。

## 目次

- [基本的なアリーナ作成](#基本的なアリーナ作成)
- [推奨サイズと設計](#推奨サイズと設計)
- [地形とレイアウト](#地形とレイアウト)
- [詳細設定](#詳細設定)
- [複数アリーナの管理](#複数アリーナの管理)
- [ベストプラクティス](#ベストプラクティス)

## 基本的なアリーナ作成

### ステップ1: ワールドの準備

専用のゲームワールドを作成することを推奨します。

```bash
# サーバーを停止
# 新しいワールドフォルダを作成（例: tnt_world）
# bukkit.yml で設定
worlds:
  tnt_world:
    generator: flat  # フラットワールド（オプション）
```

### ステップ2: アリーナの範囲指定

アリーナにしたいエリアに移動し、対角線上の2点を指定します。

#### 角1の設定
```
/tnttag setpos1
```

アリーナの一方の角（例: 南西の角）に立って実行します。

**出力**:
```
✓ 位置1を設定しました: X=100, Y=64, Z=200
```

#### 角2の設定
```
/tnttag setpos2
```

アリーナのもう一方の角（例: 北東の角）に立って実行します。

**出力**:
```
✓ 位置2を設定しました: X=150, Y=80, Z=250
✓ 範囲: 50x16x50ブロック
```

### ステップ3: アリーナの作成

```
/tnttag creategame <アリーナ名>
```

**例**:
```
/tnttag creategame arena1
```

**出力**:
```
✓ アリーナ 'arena1' を作成しました
✓ スポーン地点: X=125, Y=64, Z=225
✓ /tnttag start arena1 でゲームを開始できます
```

### ステップ4: テスト

```
/tnttag join arena1
/tnttag start arena1
```

少人数でテストして動作を確認します。

---

## 推奨サイズと設計

### プレイヤー数別の推奨サイズ

| プレイヤー数 | 推奨サイズ | アリーナタイプ | 面積 |
|------------|-----------|-------------|-----|
| 10-15人 | 30x30 | SMALL | 900m² |
| 20-25人 | 50x50 | MEDIUM | 2,500m² |
| 30-40人 | 70x70 | LARGE | 4,900m² |

### 計算式

```
1プレイヤーあたり約100m²を目安
```

**例**: 25人の場合
```
25人 × 100m² = 2,500m²
√2,500 ≈ 50m × 50m
```

### 高さの推奨値

| 要素 | 推奨値 | 説明 |
|-----|-------|------|
| 最小高さ | 10ブロック | 圧迫感を避ける |
| 推奨高さ | 16-20ブロック | 快適なプレイ環境 |
| 最大高さ | 30ブロック | 落下ダメージに注意 |

### 形状のバリエーション

#### 正方形（推奨）
```
50m × 50m
利点: バランスが良い、全方向への逃走が可能
```

#### 長方形
```
40m × 60m
利点: 直線的な追いかけっこに適している
```

#### 円形
```
半径 28m（面積 約2,500m²）
利点: 角に追い込まれない、均等な距離感
```

---

## 地形とレイアウト

### 基本レイアウト

#### フラットタイプ（初心者向け）
```
■■■■■■■■■■
■        ■
■   🔥   ■  🔥 = スポーン地点
■        ■
■■■■■■■■■■
```

**特徴**:
- 完全にフラット
- 障害物なし
- シンプルで公平

#### オブスタクルタイプ（標準）
```
■■■■■■■■■■
■  ▢  ▢  ■
■ ▢ 🔥 ▢ ■  ▢ = 障害物
■  ▢  ▢  ■
■■■■■■■■■■
```

**特徴**:
- 柱や壁などの障害物
- 戦略性が増す
- 隠れ場所あり

#### 段差タイプ（上級者向け）
```
■■■■■■■■■■
■▁▁▁▁▁▁▁▁■
■▁▄▄🔥▄▄▁■  ▄ = 段差
■▁▁▁▁▁▁▁▁■
■■■■■■■■■■
```

**特徴**:
- 高低差がある
- 立体的な動き
- 上級者向け

### 推奨する要素

#### 1. 中央スポーン地点
```yaml
特徴:
  - アリーナの中心
  - 全方向へアクセス可能
  - 公平なスタート
```

#### 2. 障害物（4-8個）
```yaml
種類:
  - 柱: 3x3ブロック
  - 壁: 長さ5-10ブロック
  - 構造物: 小さな建物

配置:
  - 均等に分散
  - 逃走ルートを遮断しない
  - 完全に隠れられない
```

#### 3. 逃走ルート
```yaml
重要性:
  - 複数のルートを確保
  - 行き止まりを作らない
  - 幅は最低3ブロック
```

#### 4. 壁（境界）
```yaml
高さ: 5ブロック以上
材質: ガラス、石、レンガなど
目的: プレイヤーが外に出ないように
```

### 避けるべき要素

#### ❌ 深い穴
```
落下ダメージやハマるリスク
```

#### ❌ 狭すぎる通路
```
2ブロック幅以下は避ける
```

#### ❌ 複雑すぎる迷路
```
プレイヤーが迷子になる
```

#### ❌ 暗い場所
```
視認性が悪い（ライトを配置）
```

---

## 詳細設定

### スポーン地点のカスタマイズ

デフォルトでは中央の1点ですが、複数設定することも可能です。

#### arenas.yml を編集
```yaml
arenas:
  arena1:
    spawn_points:
      # 北
      - x: 0
        y: 64
        z: -20
        yaw: 180  # 南を向く
        pitch: 0
      # 東
      - x: 20
        y: 64
        z: 0
        yaw: 270  # 西を向く
        pitch: 0
      # 南
      - x: 0
        y: 64
        z: 20
        yaw: 0    # 北を向く
        pitch: 0
      # 西
      - x: -20
        y: 64
        z: 0
        yaw: 90   # 東を向く
        pitch: 0
```

#### 向きの設定（yaw）
```
  0° = 北
 90° = 東
180° = 南
270° = 西
```

### ワールドボーダーの設定

ゲーム開始時に自動的にワールドボーダーが設定されます。

#### config.yml
```yaml
arena:
  world_border: true  # ワールドボーダー有効化
```

手動で設定する場合：
```
/worldborder center 0 0
/worldborder set 100
```

---

## 複数アリーナの管理

### 複数アリーナの作成

同じワールドに複数のアリーナを作成可能です。

#### 推奨間隔
```
アリーナ間の距離: 最低100ブロック
```

#### 作成手順
```bash
# アリーナ1
/tnttag setpos1
/tnttag setpos2
/tnttag creategame arena1

# 別の場所に移動（100ブロック以上離れる）

# アリーナ2
/tnttag setpos1
/tnttag setpos2
/tnttag creategame arena2
```

### アリーナの種類

#### 1. スタンダードアリーナ
```
タイプ: フラット
難易度: 易しい
推奨: 初心者向け
```

#### 2. チャレンジアリーナ
```
タイプ: 段差・障害物多数
難易度: 普通
推奨: 中級者向け
```

#### 3. エクストリームアリーナ
```
タイプ: 複雑な構造
難易度: 難しい
推奨: 上級者向け
```

### アリーナの削除

```
/tnttag delete <アリーナ名>
```

**注意**: ゲーム中のアリーナは削除できません。

---

## ベストプラクティス

### 設計のチェックリスト

#### 基本要素
- [ ] プレイヤー数に適したサイズ
- [ ] 中央にスポーン地点
- [ ] 明確な境界（壁）
- [ ] 十分な照明

#### ゲームプレイ
- [ ] 複数の逃走ルート
- [ ] 行き止まりがない
- [ ] 障害物が適度に配置
- [ ] 高低差は適度（あれば）

#### 安全性
- [ ] 深い穴がない
- [ ] 落下ダメージのリスクが低い
- [ ] 外に出られない

#### 美観
- [ ] テーマに沿った装飾
- [ ] 見やすい配色
- [ ] 没入感のある環境

### テーマ別デザイン例

#### 1. 都市アリーナ
```
ブロック: 石レンガ、ガラス、コンクリート
障害物: ビルの柱、車、街灯
特徴: 都会的な雰囲気
```

#### 2. 森林アリーナ
```
ブロック: 草、土、木材、葉
障害物: 木、岩、茂み
特徴: 自然な雰囲気
```

#### 3. 地獄アリーナ
```
ブロック: ネザーラック、溶岩（装飾）、黒曜石
障害物: 柱、ネザー要塞風の構造
特徴: 緊迫感のある雰囲気
```

#### 4. 古代遺跡アリーナ
```
ブロック: 砂岩、苔石レンガ、ひび割れた石レンガ
障害物: 柱、壊れた壁、石像
特徴: 歴史的な雰囲気
```

### パフォーマンス最適化

#### 軽量化のコツ
1. **エンティティを最小限に**
   - 装飾用のMobは使わない
   - アーマースタンドを減らす

2. **レッドストーン回路なし**
   - ゲームプレイに不要
   - サーバー負荷になる

3. **シンプルな構造**
   - 過度に複雑にしない
   - 基本的な形状を維持

4. **照明の最適化**
   - グロウストーンやシーランタン使用
   - 松明を大量に置かない

### トラブルシューティング

#### スポーン地点が適切でない

**症状**: プレイヤーが壁にスポーンする、落下する

**解決策**:
1. arenas.yml を開く
2. spawn_points の座標を修正
3. `/tnttag reload` で反映

#### アリーナが小さすぎる/大きすぎる

**症状**: ゲームバランスが悪い

**解決策**:
1. アリーナを削除 `/tnttag delete arena1`
2. 適切なサイズで再作成
3. テストプレイで確認

#### ワールドボーダーが機能しない

**症状**: プレイヤーがアリーナ外に出られる

**解決策**:
1. config.yml で world_border: true を確認
2. 手動でワールドボーダーを設定
3. サーバー再起動

---

## アリーナ作成の実例

### 例1: 標準的な50x50アリーナ

```bash
# 1. 座標 (-25, 64, -25) に移動
/tp @s -25 64 -25
/tnttag setpos1

# 2. 座標 (25, 80, 25) に移動
/tp @s 25 80 25
/tnttag setpos2

# 3. アリーナ作成
/tnttag creategame standard_arena

# 4. テスト
/tnttag join standard_arena
```

### 例2: 小規模テスト用アリーナ

```bash
# config.yml で min_players を 2 に変更
game:
  min_players: 2

# 30x30 のアリーナ作成
/tp @s 0 64 0
/tnttag setpos1
/tp @s 30 74 30
/tnttag setpos2
/tnttag creategame test_arena
```

---

## よくある質問

### Q: 複数のワールドにアリーナを作れますか？
**A**: はい、可能です。各アリーナは個別のワールドに作成できます。

### Q: 既存のアリーナを編集できますか？
**A**: いいえ、一度削除して再作成する必要があります。

### Q: スポーン地点を後から変更できますか？
**A**: はい、arenas.yml を編集して `/tnttag reload` で反映できます。

### Q: 地下にアリーナを作れますか？
**A**: はい、Y座標が任意の場所で作成可能です。

### Q: 天井は必要ですか？
**A**: 必須ではありませんが、飛行防止のため推奨します。

---

**関連ページ**:
- [Configuration](Configuration) - アリーナ設定の詳細
- [Game Rules](Game-Rules) - ゲームルールとバランス
- [Troubleshooting](Troubleshooting) - 問題解決
